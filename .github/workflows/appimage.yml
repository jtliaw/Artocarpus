- name: Prepare AppDir
  run: |
    mkdir -p AppDir/usr/bin
    mkdir -p AppDir/usr/share/icons/hicolor/256x256/apps

    # 拷贝文件
    cp adb AppDir/usr/bin/
    cp scrcpy AppDir/usr/bin/
    cp scrcpy_gui.py AppDir/usr/bin/
    cp scrcpy-server AppDir/usr/bin/

    # 复制图标，重点是这里！！！
    cp icon.png AppDir/Artocarpus_scrcpy_gui.png
    cp icon.png AppDir/usr/share/icons/hicolor/256x256/apps/Artocarpus_scrcpy_gui.png

    chmod +x AppDir/usr/bin/adb
    chmod +x AppDir/usr/bin/scrcpy
    chmod +x AppDir/usr/bin/scrcpy-server

    # 创建 AppRun 启动脚本
    cat <<'EOF' > AppDir/AppRun
    #!/bin/bash
    HERE="$(dirname "$(readlink -f "${0}")")"
    python3 "$HERE/usr/bin/scrcpy_gui.py" "$@"
    EOF
    chmod +x AppDir/AppRun

    # 创建 Desktop 文件
    cat <<'EOF' > AppDir/Artocarpus_scrcpy_gui.desktop
    [Desktop Entry]
    Name=Artocarpus Scrcpy GUI
    Exec=AppRun
    Icon=Artocarpus_scrcpy_gui
    Type=Application
    Categories=Utility;
    EOF
